

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id             Int            @id @default(autoincrement())
  nombre         String?
  correo         String         @unique
  telefono       String?        @unique
  contrase√±a    String?
  foto           String?
  cuenta_google  Boolean?       @default(false)
  googleId       String?        @unique
  created_at     DateTime       @default(now())
  updated_at     DateTime       @updatedAt
  Mascotas       Mascota[]
  Notificaciones Notificacion[]
}

model Mascota {
  id               Int                 @id @default(autoincrement())
  id_usuario       Int
  nombre           String
  especie          String
  raza             String?
  fecha_nacimiento DateTime
  sexo             String
  color            String?
  peso             Float?
  foto             String?
  alergias         String?
  enfermedades     String?
  observaciones    String?
  created_at       DateTime            @default(now())
  updated_at       DateTime            @updatedAt
  carnet           Carnet_Digital[]
  documentos       Documento_Mascota[]
  eventos          Evento[]
  usuario          Usuario             @relation(fields: [id_usuario], references: [id])
}

model Evento {
  id           Int           @id @default(autoincrement())
  id_mascota   Int
  titulo       String
  descripcion  String?
  fecha_inicio DateTime
  fecha_fin    DateTime?
  estado       String
  repeticion   String?
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt
  mascota      Mascota       @relation(fields: [id_mascota], references: [id])
  notificacion Notificacion?
}

model Notificacion {
  id               Int      @id @default(autoincrement())
  id_usuario       Int
  id_evento        Int      @unique
  tipo             String
  mensaje          String
  fecha_programada DateTime
  canal            String
  enviada          Boolean? @default(false)
  created_at       DateTime @default(now())
  evento           Evento   @relation(fields: [id_evento], references: [id])
  usuario          Usuario  @relation(fields: [id_usuario], references: [id])
}

model Documento_Mascota {
  id          Int      @id @default(autoincrement())
  id_mascota  Int
  tipo        String
  titulo      String
  descripcion String?
  archivo_pdf String
  uploadedAt  DateTime @default(now())
  mascota     Mascota  @relation(fields: [id_mascota], references: [id])
}

model Carnet_Digital {
  id                          Int       @id @default(autoincrement())
  id_mascota                  Int
  tipo_medicamento            String
  nombre_medicamento          String
  fecha_aplicacion            DateTime
  laboratorio                 String
  id_lote                     String
  mes_elaboracion_medicamento Int?
  ano_elaboracion_medicamento Int?
  mes_vencimiento_medicamento Int
  ano_vencimiento_medicamento Int
  peso                        Float
  nombre_veterinaria          String
  telefono_veterinaria        String?
  direccion_veterinaria       String
  proxima_dosis               DateTime?
  observaciones               String?
  created_at                  DateTime  @default(now())
  updated_at                  DateTime  @updatedAt
  mascota                     Mascota   @relation(fields: [id_mascota], references: [id])
}
