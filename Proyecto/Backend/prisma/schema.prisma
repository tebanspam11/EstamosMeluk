// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id             Int              @id @default(autoincrement())
  nombre         String?
  correo         String           @unique
  telefono       String?          @unique
  contrase√±a     String?
  cuenta_google  Boolean?         @default(false)
  created_at     DateTime         @default(now())
  updated_at     DateTime         @updatedAt

  Mascotas        Mascota[]
  Notificaciones  Notificacion[]
}

model Mascota {
  id              Int              @id @default(autoincrement())
  id_usuario      Int
  nombre          String
  especie         String
  raza            String?
  edad            Int?
  peso            Float?
  foto            String?
  alergias        String?
  enfermedades    String?
  observaciones   String?
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt

  usuario         Usuario          @relation(fields: [id_usuario], references: [id])
  eventos         Evento[]
  documentos      Documento_Mascota[]
  carnet          Carnet_Digital?
}

model Evento {
  id              Int              @id @default(autoincrement())
  id_mascota      Int
  titulo          String
  descripcion     String?
  fecha_inicio    DateTime
  fecha_fin       DateTime?
  estado          String
  repeticion      String?
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt

  mascota         Mascota          @relation(fields: [id_mascota], references: [id])
  notificacion    Notificacion?
}

model Notificacion {
  id               Int              @id @default(autoincrement())
  id_usuario       Int
  id_evento        Int              @unique
  tipo             String
  mensaje          String
  fecha_programada DateTime
  canal            String
  enviada          Boolean?         @default(false)
  created_at       DateTime         @default(now())

  usuario          Usuario          @relation(fields: [id_usuario], references: [id])
  evento           Evento           @relation(fields: [id_evento], references: [id])
}

model Documento_Mascota {
  id              Int              @id @default(autoincrement())
  id_mascota      Int
  tipo            String
  titulo          String
  descripcion     String?
  archivo_pdf     String
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt

  mascota         Mascota          @relation(fields: [id_mascota], references: [id])
}

model Carnet_Digital {
  id                     Int              @id @default(autoincrement())
  id_mascota             Int              @unique
  tipo_medicamento       String
  nombre_medicamento     String
  fecha_aplicacion       DateTime
  laboratorio            String?
  id_lote                String
  fecha_elaboracion      DateTime?
  fecha_vencimiento      DateTime
  peso                   Float
  nombre_veterinaria     String
  telefono_veterinaria   String?
  direccion_veterinaria  String
  proxima_dosis          DateTime?
  observaciones          String?
  created_at             DateTime         @default(now())
  updated_at             DateTime         @updatedAt

  mascota                Mascota          @relation(fields: [id_mascota], references: [id])
}
